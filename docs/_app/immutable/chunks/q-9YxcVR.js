import{aH as H,u as j,r as B,h as L}from"./DMgRPyFJ.js";import{l as N}from"./DdMn_Oyi.js";import{d as U,g as w,w as M}from"./BPh1EgFP.js";function p(e,u,r=u){var a=H();N(e,"input",n=>{var i=n?e.defaultValue:e.value;if(i=g(e)?_(i):i,r(i),a&&i!==(i=u())){var f=e.selectionStart,b=e.selectionEnd;e.value=i??"",b!==null&&(e.selectionStart=f,e.selectionEnd=Math.min(b,e.value.length))}}),(L&&e.defaultValue!==e.value||j(u)==null&&e.value)&&r(g(e)?_(e.value):e.value),B(()=>{var n=u();g(e)&&n===_(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function g(e){var u=e.type;return u==="number"||u==="range"}function _(e){return e===""?null:+e}function W(e,u,r,a){var n,i,f=!1,b=r.length>=2,R=(d,l,o)=>{if(n=l,b&&(i=d),!f){let t=u(d,l,o);if(u.length<2)l(t);else return t}f=!1},y=U(e,R,a),E=!Array.isArray(e);function P(d){var l=r(d,i);E?(f=!0,e.set(l)):l.forEach((o,t)=>{f=!0,e[t].set(o)}),f=!1}var h=!1;function S(d){var l,o,t,v;if(h){v=d(w(y)),n(v);return}var Q=y.subscribe(x=>{h?l?o=!0:l=!0:t=x});v=d(t),h=!0,n(v),Q(),h=!1,o&&(v=w(y)),l&&P(v)}return{subscribe:y.subscribe,set(d){S(()=>d)},update:S}}const q=20,s=M([]),D=M(null),T=new Map,V=e=>{if(T.has(e))return;const u=setTimeout(()=>{T.delete(e),A(e)},1e3);T.set(e,u)},z=e=>{const u=T.get(e);u&&clearTimeout(u)};function C(e,u=!0){u&&e.id&&z(e.id),s.update(r=>r.map(a=>a.id===e.id?{...a,...e}:a))}function F(e){s.update(u=>[e,...u].slice(0,q))}function G(e){w(s).find(u=>u.id===e.id)?C(e):F(e)}function J(e){s.update(u=>(e?V(e):u.forEach(r=>{V(r.id)}),u.map(r=>r.id===e||e===void 0?{...r,visible:!1}:r)))}function A(e){s.update(u=>e===void 0?[]:u.filter(r=>r.id!==e))}function ee(e){D.set(e)}function re(e){let u;D.update(r=>(u=e-(r||0),null)),s.update(r=>r.map(a=>({...a,pauseDuration:a.pauseDuration+u})))}const K={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3};function ue(e={}){return{toasts:W(s,r=>r.map(a=>{var n,i;return{...e,...e[a.type],...a,duration:a.duration||((n=e[a.type])==null?void 0:n.duration)||(e==null?void 0:e.duration)||K[a.type],style:[e.style,(i=e[a.type])==null?void 0:i.style,a.style].join(";")}}),r=>r),pausedAt:D}}const X=e=>typeof e=="function",k=(e,u)=>X(e)?e(u):e,Y=(()=>{let e=0;return()=>(e+=1,e.toString())})(),ae=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){const u=matchMedia("(prefers-reduced-motion: reduce)");e=!u||u.matches}return e}})(),Z=(e,u="blank",r)=>({createdAt:Date.now(),visible:!0,type:u,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,icon:r==null?void 0:r.icon,duration:r==null?void 0:r.duration,iconTheme:r==null?void 0:r.iconTheme,position:r==null?void 0:r.position,props:r==null?void 0:r.props,id:(r==null?void 0:r.id)||Y()}),m=e=>(u,r)=>{const a=Z(u,e,r);return G(a),a.id},c=(e,u)=>m("blank")(e,u);c.error=m("error");c.success=m("success");c.loading=m("loading");c.custom=m("custom");c.dismiss=e=>{J(e)};c.remove=e=>A(e);c.promise=(e,u,r)=>{const a=c.loading(u.loading,{...r,...r==null?void 0:r.loading});return e.then(n=>(c.success(k(u.success,n),{id:a,...r,...r==null?void 0:r.success}),n)).catch(n=>{c.error(k(u.error,n),{id:a,...r,...r==null?void 0:r.error})}),e};export{C as a,p as b,re as e,ae as p,ee as s,c as t,ue as u};
