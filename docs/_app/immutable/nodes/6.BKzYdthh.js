import{t as j,a as x,c as re}from"../chunks/DrDwaiBy.js";import"../chunks/BPGHJWI2.js";import{p as oe,t as J,o as e,a as ie,s as l,c as a,x as o,D as p,b as s,aj as ne,ak as le}from"../chunks/DMgRPyFJ.js";import{e as A,r as pe,s as L}from"../chunks/DdMn_Oyi.js";import{i as me}from"../chunks/CFSjT7ar.js";import{e as ce,i as ue}from"../chunks/DU0MZw2q.js";import{r as U,a as de,s as ve}from"../chunks/DJvQYuIs.js";import{b as N,t as fe}from"../chunks/q-9YxcVR.js";import{i as ge}from"../chunks/BQwoijYz.js";import{s as be,a as z,b as he}from"../chunks/BmmjJtSI.js";import{o as we}from"../chunks/BjBEmkcC.js";import{u as R,p as V}from"../chunks/H-dT48qA.js";import{g as _e}from"../chunks/CjN1-TbL.js";import{b as xe}from"../chunks/C-yncLNe.js";function E(m){return function(...v){var f=v[0];return f.preventDefault(),m==null?void 0:m.apply(this,v)}}var ye=j('<img alt="attached by user">'),$e=j("<p>No images attached yet</p>"),ke=j('<main class="dark:bg-surface-900 bg-surface-50 svelte-yws3we"><form class="svelte-yws3we"><div id="topBar" class="svelte-yws3we"><h1>Create a post here...</h1> <p> </p> <button type="submit"> </button></div> <input placeholder="Title" type="text" required class="inputBox text-black dark:bg-surface-100 svelte-yws3we"> <textarea placeholder="Main Paragraph" required class="inputBox text-black dark:bg-surface-100 svelte-yws3we"></textarea></form> <aside id="toolSelector" class="svelte-yws3we"><form class="svelte-yws3we"><input placeholder="Paste image url here" type="text" required class="inputBox text-black dark:bg-surface-100 svelte-yws3we"> <button type="submit" class="border2px fancyText btn transition-all duration-1000 preset-outlined-secondary-200-800 svelte-yws3we">Attach image</button></form> <label for="attachedImagesShowcase">Attached Images:</label> <div id="attachedImagesShowcase" class="svelte-yws3we"><!></div></aside></main>');function Le(m,v){oe(v,!1);const[f,F]=be(),G=()=>z(V,"$posts_store",f),H=()=>z(R,"$user",f);let y=p(""),$=p(""),i=p([]),K=[],q="",n=p(""),g=p(""),k=[],b=p(!1);we(()=>{k=JSON.parse(G()),q=R?JSON.parse(H()):""});function Q(){const t="abcdefghijklmnopqrstuvwxyz",r="0123456789",c=()=>t[Math.floor(Math.random()*t.length)],u=()=>r[Math.floor(Math.random()*r.length)];let d="";do d=`${u()}${u()}${u()}${c()}${c()}${c()}`;while(k.some(_=>_.id===d));return d}function W(){if(e(b)){_e(xe+"/post/"+e(g));return}o(g,Q());const t={id:e(g),author:q,header:e(y),text:e($),date:new Date().toISOString(),likes:0,dislikes:0,attachedImages:e(i),comments:[],tags:K};he(V,JSON.stringify([...k,t])),o(b,!0),Y()}function X(){e(n).match(/\.(jpeg|jpg|gif|png)$/i)?(e(i).push(e(n)),o(i,e(i)),alert("added image"+e(n)),o(n,"")):alert("Please enter a valid image URL.")}function Y(){fe.success("Post posted!")}ge();var I=ke(),h=a(I),P=a(h),S=l(a(P),2),Z=a(S,!0);s(S);var D=l(S,2),ee=a(D,!0);s(D),s(P);var M=l(P,2);U(M);var B=l(M,2);pe(B),s(h);var O=l(h,2),w=a(O),T=a(w);U(T),ne(2),s(w);var C=l(w,4),te=a(C);{var ae=t=>{var r=re(),c=le(r);ce(c,1,()=>e(i),ue,(u,d)=>{var _=ye();J(()=>ve(_,"src",e(d))),x(u,_)}),x(t,r)},se=t=>{var r=$e();x(t,r)};me(te,t=>{e(i).length>0?t(ae):t(se,!1)})}s(C),s(O),s(I),J(()=>{L(Z,e(g)),de(D,1,`border2px fancyText btn transition-all duration-1000 ${(e(b)?"preset-outlined-white bg-primary-950":"preset-outlined-primary-50-950")??""}`,"svelte-yws3we"),L(ee,e(b)?"View Post":"Create Post")}),N(M,()=>e(y),t=>o(y,t)),N(B,()=>e($),t=>o($,t)),A("submit",h,E(W)),N(T,()=>e(n),t=>o(n,t)),A("submit",w,E(X)),x(m,I),ie(),F()}export{Le as component};
