import{t as O,a as y,c as oe}from"../chunks/DrDwaiBy.js";import"../chunks/BPGHJWI2.js";import{p as ie,t as L,o as e,a as le,s as i,c as s,x as a,D as l,b as r,aj as ne,ak as pe}from"../chunks/DMgRPyFJ.js";import{e as U,r as me,s as z}from"../chunks/DdMn_Oyi.js";import{i as ce}from"../chunks/CFSjT7ar.js";import{e as ue,i as de}from"../chunks/DU0MZw2q.js";import{r as j,a as ve,s as fe}from"../chunks/DJvQYuIs.js";import{b as k,t as be}from"../chunks/q-9YxcVR.js";import{i as ge}from"../chunks/BQwoijYz.js";import{s as he,a as R,b as we}from"../chunks/BmmjJtSI.js";import{o as _e}from"../chunks/BjBEmkcC.js";import{u as V,p as Y}from"../chunks/H-dT48qA.js";import{g as xe}from"../chunks/BDvC00Yi.js";import{b as ye}from"../chunks/eT8tQ8-L.js";function E(m){return function(...v){var f=v[0];return f.preventDefault(),m==null?void 0:m.apply(this,v)}}var ke=O('<img alt="attached by user">'),$e=O("<p>No images attached yet</p>"),Ie=O('<main class="dark:bg-surface-900 bg-surface-50 svelte-yws3we"><form class="svelte-yws3we"><div id="topBar" class="svelte-yws3we"><h1>Create a post here...</h1> <p> </p> <input placeholder="Your name here pls!" type="text" required class="inputBox text-black dark:bg-surface-100 svelte-yws3we"> <button type="submit"> </button></div> <input placeholder="Title" type="text" required class="inputBox text-black dark:bg-surface-100 svelte-yws3we"> <textarea placeholder="Main Paragraph" required class="inputBox text-black dark:bg-surface-100 svelte-yws3we"></textarea></form> <aside id="toolSelector" class="svelte-yws3we"><form class="svelte-yws3we"><input placeholder="Paste image url here" type="text" required class="inputBox text-black dark:bg-surface-100 svelte-yws3we"> <button type="submit" class="border2px fancyText btn transition-all duration-1000 preset-outlined-secondary-200-800 svelte-yws3we">Attach image</button></form> <label for="attachedImagesShowcase">Attached Images:</label> <div id="attachedImagesShowcase" class="svelte-yws3we"><!></div></aside></main>');function Ue(m,v){ie(v,!1);const[f,F]=he(),G=()=>R(Y,"$posts_store",f),H=()=>R(V,"$user",f);let $=l(""),I=l(""),n=l([]),K=[],b=l(""),p=l(""),g=l(""),P=[],h=l(!1);_e(()=>{P=JSON.parse(G()),a(b,V?JSON.parse(H()):""),a(g,Q())});function Q(){const t="abcdefghijklmnopqrstuvwxyz",o="0123456789",c=()=>t[Math.floor(Math.random()*t.length)],u=()=>o[Math.floor(Math.random()*o.length)];let d="";do d=`${u()}${u()}${u()}${c()}${c()}${c()}`;while(P.some(x=>x.id===d));return d}function W(){if(e(h)){xe(ye+"/post/"+e(g));return}const t={id:e(g),author:e(b),header:e($),text:e(I),date:new Date().toISOString(),likes:0,dislikes:0,attachedImages:e(n),comments:[],tags:K};we(Y,JSON.stringify([...P,t])),a(h,!0),Z()}function X(){e(p).match(/\.(jpeg|jpg|gif|png)$/i)?(e(n).push(e(p)),a(n,e(n)),alert("added image"+e(p)),a(p,"")):alert("Please enter a valid image URL.")}function Z(){be.success("Post posted!")}ge();var S=Ie(),w=s(S),D=s(w),M=i(s(D),2),ee=s(M,!0);r(M);var q=i(M,2);j(q);var B=i(q,2),te=s(B,!0);r(B),r(D);var N=i(D,2);j(N);var T=i(N,2);me(T),r(w);var C=i(w,2),_=s(C),J=s(_);j(J),ne(2),r(_);var A=i(_,4),ae=s(A);{var se=t=>{var o=oe(),c=pe(o);ue(c,1,()=>e(n),de,(u,d)=>{var x=ke();L(()=>fe(x,"src",e(d))),y(u,x)}),y(t,o)},re=t=>{var o=$e();y(t,o)};ce(ae,t=>{e(n).length>0?t(se):t(re,!1)})}r(A),r(C),r(S),L(()=>{z(ee,e(g)),ve(B,1,`border2px fancyText btn transition-all duration-1000 ${(e(h)?"preset-outlined-white bg-primary-950":"preset-outlined-primary-50-950")??""}`,"svelte-yws3we"),z(te,e(h)?"View Post":"Create Post")}),k(q,()=>e(b),t=>a(b,t)),k(N,()=>e($),t=>a($,t)),k(T,()=>e(I),t=>a(I,t)),U("submit",w,E(W)),k(J,()=>e(p),t=>a(p,t)),U("submit",_,E(X)),y(m,S),le(),F()}export{Ue as component};
