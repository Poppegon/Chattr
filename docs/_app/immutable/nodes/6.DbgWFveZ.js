import{t as D,a as x,c as nt}from"../chunks/D1s-kvjY.js";import"../chunks/ZPKrDV2y.js";import{p as mt,t as J,C as t,a as lt,s as m,c as a,a4 as o,N as l,b as s,ak as pt,aj as ct}from"../chunks/YDlJPZmQ.js";import{s as A}from"../chunks/Bksj7s0v.js";import{i as ut}from"../chunks/CC3e2zg8.js";import{e as dt,i as ft}from"../chunks/BGqQZx69.js";import{r as L,a as vt,s as gt}from"../chunks/BhkBn18z.js";import{e as U,b as bt}from"../chunks/B8_4EV0n.js";import{b as N,t as T}from"../chunks/BOg8pFoh.js";import{i as ht}from"../chunks/DBBHsLIV.js";import{s as _t,a as E,b as yt}from"../chunks/DUzqImMa.js";import{o as xt}from"../chunks/DCF7Jovm.js";import{u as R,p as V}from"../chunks/CObjRXDB.js";import{g as kt}from"../chunks/DG0GCAST.js";import{b as $t}from"../chunks/V7vc05G1.js";function F(p){return function(...f){var v=f[0];return v.preventDefault(),p==null?void 0:p.apply(this,f)}}var zt=D('<img alt="attached by user">'),It=D("<p>No images attached yet</p>"),wt=D('<main class="dark:bg-surface-900 bg-surface-50 svelte-zk7y4m"><form class="svelte-zk7y4m"><div id="topBar" class="svelte-zk7y4m"><h1>Create a post here...</h1> <p> </p> <button type="submit"> </button></div> <input placeholder="Title" type="text" required class="inputBox text-black dark:bg-surface-100 svelte-zk7y4m"> <textarea placeholder="Main Paragraph" required class="inputBox text-black dark:bg-surface-100 svelte-zk7y4m"></textarea></form> <aside id="toolSelector" class="svelte-zk7y4m"><form class="svelte-zk7y4m"><input placeholder="Paste image url here" type="text" required class="inputBox text-black dark:bg-surface-100 svelte-zk7y4m"> <button type="submit" class="border2px fancyText btn transition-all duration-1000 preset-outlined-secondary-200-800 svelte-zk7y4m">Attach image</button></form> <label for="attachedImagesShowcase">Attached Images:</label> <div id="attachedImagesShowcase" class="svelte-zk7y4m"><!></div></aside></main>');function Et(p,f){mt(f,!1);const[v,G]=_t(),H=()=>E(V,"$posts_store",v),K=()=>E(R,"$user",v);let k=l(""),$=l(""),i=l([]),Q=[],j="",c=l(""),g=l(""),z=[],b=l(!1);xt(()=>{z=JSON.parse(H()),j=R?JSON.parse(K()):""});function W(){const e="abcdefghijklmnopqrstuvwxyz",r="0123456789",u=()=>e[Math.floor(Math.random()*e.length)],d=()=>r[Math.floor(Math.random()*r.length)];let n="";do n=`${d()}${d()}${d()}${u()}${u()}${u()}`;while(z.some(y=>y.id===n));return console.log(n),n}function X(){if(t(b)){kt($t+"/post/"+t(g));return}o(g,W());const e={id:t(g),author:j,header:t(k),text:t($),date:new Date().toISOString(),likes:0,dislikes:0,attachedImages:t(i),comments:[],tags:Q};yt(V,JSON.stringify([...z,e])),o(b,!0),Z()}function Y(){t(c).match(/\.(jpeg|jpg|gif|png)$/i)?(t(i).push(t(c)),o(i,t(i)),tt(),o(c,"")):et()}function Z(){T.success("Post posted!")}function tt(){T.success("Image attached")}function et(){T.error("Invalid image URL")}ht();var I=wt(),h=a(I),w=a(h),S=m(a(w),2),at=a(S,!0);s(S);var P=m(S,2),st=a(P,!0);s(P),s(w);var M=m(w,2);L(M);var q=m(M,2);bt(q),s(h);var B=m(h,2),_=a(B),C=a(_);L(C),pt(2),s(_);var O=m(_,4),rt=a(O);{var ot=e=>{var r=nt(),u=ct(r);dt(u,1,()=>t(i),ft,(d,n)=>{var y=zt();J(()=>gt(y,"src",t(n))),x(d,y)}),x(e,r)},it=e=>{var r=It();x(e,r)};ut(rt,e=>{t(i).length>0?e(ot):e(it,!1)})}s(O),s(B),s(I),J(()=>{A(at,t(g)),vt(P,1,`border2px fancyText btn transition-all duration-1000 ${(t(b)?"preset-outlined-white bg-primary-950":"preset-outlined-primary-50-950")??""}`,"svelte-zk7y4m"),A(st,t(b)?"View Post":"Create Post")}),N(M,()=>t(k),e=>o(k,e)),N(q,()=>t($),e=>o($,e)),U("submit",h,F(X)),N(C,()=>t(c),e=>o(c,e)),U("submit",_,F(Y)),x(p,I),lt(),G()}export{Et as component};
